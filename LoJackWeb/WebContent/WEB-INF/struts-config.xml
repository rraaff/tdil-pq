<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
                               "http://struts.apache.org/dtds/struts-config_1_2.dtd">
<struts-config>
 <data-sources/>
 <form-beans>
  <form-bean id="LoginForm" name="LoginForm" type="com.tdil.lojack.struts.forms.LoginForm"/>
  <form-bean id="RequestResetPasswordForm" name="RequestResetPasswordForm" type="com.tdil.lojack.struts.forms.RequestResetPasswordForm"/>
  <form-bean id="ResetPasswordForm" name="ResetPasswordForm" type="com.tdil.lojack.struts.forms.ResetPasswordForm"/>
  <form-bean id="RegisterForm" name="RegisterForm" type="com.tdil.lojack.struts.forms.RegisterForm"/>
  <form-bean id="UpdatePersonForm" name="UpdatePersonForm" type="com.tdil.lojack.struts.forms.RegisterForm"/>
  <form-bean id="AlarmsForm" name="AlarmsForm" type="com.tdil.lojack.struts.forms.AlarmsForm"/>
  <form-bean id="LightsForm" name="LightsForm" type="com.tdil.lojack.struts.forms.LightsForm"/>
 </form-beans>
 <global-exceptions/>
 <global-forwards>
  <forward name="ajaxReturn" path="/empty.jsp"/>
  <forward name="notLogged" path="/index.jsp"/>
  <forward name="notAuthorized" path="/index.jsp"/>
  <forward name="invalidAction" path="/index.jsp"/>
 </global-forwards>
 <action-mappings>

  <action name="LoginForm" path="/login" scope="request" type="com.tdil.lojack.struts.action.LoginAction"/>
  
  <action path="/facebooklogin" scope="request" type="com.tdil.lojack.struts.action.LoginFacebookAction">
  	<forward name="register" path="/index.jsp?openRegister=true" redirect="true"/>
  	<forward name="continue" path="/home.jsp" redirect="true"/>
  	<forward name="cancel" path="/index.jsp" redirect="true"/>
  </action>
  
  <action path="/facebookconnect" type="com.tdil.lojack.struts.action.FacebookConnectAction">
  	<forward name="continue" path="/home.jsp" redirect="true"/>
  	<forward name="cancel" path="/home.jsp" redirect="true"/>
  </action>
  
  <action path="/twitterlogin" scope="request" type="com.tdil.lojack.struts.action.LoginTwitterAction">
  	<forward name="register" path="/index.jsp?openRegister=true" redirect="true"/>
  	<forward name="continue" path="/home.jsp" redirect="true"/>
  	<forward name="cancel" path="/index.jsp" redirect="true"/>
  </action>
  
  <action path="/twitterconnect" type="com.tdil.lojack.struts.action.TwitterConnectAction">
  	<forward name="continue" path="/home.jsp" redirect="true"/>
  	<forward name="cancel" path="/home.jsp" redirect="true"/>
  </action>
  
  <action name="RequestResetPasswordForm" path="/requestResetPassword" scope="request" type="com.tdil.lojack.struts.action.RequestResetPasswordAction"/>
  <action name="ResetPasswordForm" path="/goToResetPassword" scope="session" type="com.tdil.lojack.struts.action.GoToResetPasswordAction">
  	<forward name="continue" path="/resetPassword.jsp" redirect="true"/>
  </action>
  <action name="ResetPasswordForm" path="/resetPassword" scope="session" type="com.tdil.lojack.struts.action.ResetPasswordAction">
  	<forward name="continue" path="/home.jsp" redirect="true"/>
  	<forward name="failure" path="/resetPassword.jsp"/>
  </action>
  
  <action path="/logout" type="com.tdil.lojack.struts.action.LogoutAction"/>
  
  <action name="RegisterForm" path="/register" scope="session" type="com.tdil.lojack.struts.action.ThalamusRegisterAction">
  </action>

  <action name="UpdatePersonForm" path="/goToUpdatePerson" scope="session" type="com.tdil.lojack.struts.action.GoToUpdatePersonAction">
  	<forward name="continue" path="/updatePerson.jsp" redirect="true"/>
  </action>
  <action name="UpdatePersonForm" path="/updatePerson" scope="session" type="com.tdil.lojack.struts.action.ThalamusUpdatePersonAction">
  </action>
  
  <action path="/searchStates" type="com.tdil.lojack.struts.action.SearchStatesAjaxAction"/>
  
  <!-- Home -->
  <action name="AlarmsForm" parameter="WebsiteUser" path="/goToHomeAlarms" scope="session" type="com.tdil.lojack.struts.action.GoToHomeAlarmsAction">
  	<forward name="continue" path="/homeAlarmas.jsp" redirect="true"/>
  </action>
  <action name="LightsForm" parameter="WebsiteUser" path="/goToHomeLights" scope="session" type="com.tdil.lojack.struts.action.GoToHomeLightsAction">
  	<forward name="continue" path="/homeLuces.jsp" redirect="true"/>
  </action>

 </action-mappings>
 
 <controller processorClass="com.tdil.struts.AuthorizationRequestProcessor"/>
 <message-resources parameter="com.tdil.lojack.struts.resources.ApplicationResources"/>
</struts-config>
