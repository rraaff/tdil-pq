<project name="Milka MysqlCreateTable" basedir="." default="createTables">

	<property name="sql.driver" value="com.mysql.jdbc.Driver" />
	<property name="root.url" value="jdbc:mysql://localhost:3306/" />
	<property name="root.user" value="root" />
	<property name="root.pass" value="root" />

	<property name="db.url" value="jdbc:mysql://localhost:3306/MILKA" />
	<property name="db.user" value="MILKA_USER" />
	<property name="db.pass" value="MILKA_USER" />

	<target name="createDatabase">
		<sql driver="${sql.driver}" url="${root.url}" userid="${root.user}" password="${root.pass}">
			<classpath>
				<pathelement location="../../EnvironmentLibraries/mysql-connector-java-5.1.13-bin.jar" />
			</classpath>
			<transaction src="database.sql" />
		</sql>
	</target>

	<target name="createTables" depends="createDatabase">
		<sql driver="${sql.driver}" url="${db.url}" userid="${db.user}" password="${db.pass}">
			<classpath>
				<pathelement location="../../EnvironmentLibraries/mysql-connector-java-5.1.13-bin.jar" />
			</classpath>
			<transaction src="ddl.sql" />
		</sql>
	</target>

	<target name="makeWar">
		<delete file="./MILKA_WEB.war"></delete>
		<war destfile="./MILKA_WEB.war" basedir="../../MilkaWeb/WebContent" webxml="../../MilkaWeb/WebContent/WEB-INF/web.xml">
			<classes dir="../../JavaBase/bin"/>
			<lib dir="../../EnvironmentLibraries/">
				<include name="*.jar"/>
				<exclude name="servlet-api.jar"/>
			</lib>
		</war>
		<!--unwar src="/home/mgodoy/Simon_WEB.war" dest="/home/mgodoy/Simon_WEB/" overwrite="true"/>
		<delete file="/home/mgodoy/Simon_WEB.war"></delete>
		<delete dir="/home/mgodoy/Simon_WEB/WEB-INF"></delete>
		<tstamp>
			<format property="hora" pattern="yyyyMMddHHmm"/>
		</tstamp>
		<zip destfile="/home/mgodoy/Simon_WEB_${hora}.zip" basedir="/home/mgodoy/" includes="Simon_WEB/**"></zip>
		<delete dir="/home/mgodoy/Simon_WEB"></delete-->
	</target>
	
</project>